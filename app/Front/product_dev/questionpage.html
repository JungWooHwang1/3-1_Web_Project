<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Date and Transition</title>
    <link rel="stylesheet" href="globals.css">
    <link rel="stylesheet" href="questionpage.css">
</head>
<!--  , 오탈자 및 클래스 이름들 정리하기-->

<body>
    <div class="box">
        <div class="question-page">
            <header class="header">
                <div class="header_dates">
                    <div class="header_year"><span id="year">2024</span></div>
                    <div class="header_month_num"><span id="month">1</span></div>
                    <div class="header_month_string"> <span id="smonth">january</span></div>
                </div>
                <div class="headerbar">
                    <img class="menuimg" src="/app/Front/img/person_FILL0_wght400_GRAD0_opsz24.png"
                        onclick="toggleSidebar()" />
                    <div class="back-main" onclick="main_button()">CBY.com</div>
                </div>
            </header>
            <main class="question-box">
                <div class="days"><span id="day">28 (일)</span></div>
                <div class="wheel">
                    <div class="five" id="QnA">
                        <div class="question"><input type="text" class="aq"
                                placeholder="지금 가장 하고싶은 일은? "></div>
                        <div class="answer"><input type="text" name="answer" placeholder="A: " /></div>
                    </div>
                    <div class="four" id="QnA">
                        <div class="question"><input type="text" class="aq" placeholder="4 "> </div>
                        <div class="answer"><input type="text" name="answer" placeholder="A: " /></div>
                    </div>
                    <div class="three" id="QnA">
                        <div class="question"><input type="text" class="aq" placeholder="3"></div>
                        <div class="answer"><input type="text" name="answer" placeholder="A: " />
                        </div>
                    </div>
                    <div class="two" id="QnA">
                        <div class="question" > <input type="text" class="aq" placeholder="2"> </div>
                        <div class="answer"><input type="text" name="answer" placeholder="A: " /></div>
                    </div>
                    <div class="one" id="QnA">
                        <div class="question"><input type="text" class="aq" placeholder="1"></div>
                        <div class="answer">
                            <input type="text" name="answer" placeholder="A: " />
                        </div>
                    </div>
                    <div class="next-box"><img class="next" src="img/next.png" /></div>
                    <div class="back-box"><img class="next" src="img/back.png" /></div>
                </div>
                <div class="reroll-box"><img class="reroll" src="img/reroll.png" /></div>
                <div class="save-box"><img class="save" src="img/save.png" /></div>
            </main>


            <div id="sidebar" class="sidebar">
                <!-- 메뉴 항목들 -->
                <form action="/member/update">
                    <div class="menu-item"><button type="button">userUdate</button></div>
                </form>
                <form action="/app/Front/sign/sign-in.html">
                    <div class="menu-item"><button type="button">userLogout</button></div>
                </form>
                <div class="menu-item"><button type="button">내정보</button></div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // 초기 활성 요소를 'one'으로 설정
            $('.wheel > .one').addClass('active');

            // 'wheel' 이벤트 핸들러를 설정
            $('.wheel').on('wheel', function (event) {
                // deltaY 값을 가져와서 스크롤 방향을 결정
                const deltaY = event.originalEvent.deltaY;

                // 현재 활성 요소의 인덱스를 가져옵니다.
                let activeIndex = $('.wheel > .active').index();

                // 아래로 스크롤하고 이전 요소가 있는 경우
                if (deltaY > 0 && activeIndex > 0) {
                    // 이전 요소로 활성 클래스를 옮기고 zIndex를 업데이트
                    $('.wheel > div').eq(activeIndex - 1).addClass('active').css('z-index', 1);
                    $('.wheel > div').eq(activeIndex).removeClass('active').css('z-index', 0);
                }
                // 위로 스크롤하고 다음 요소가 있는 경우
                else if (deltaY < 0 && activeIndex < 4) {
                    // 다음 요소로 활성 클래스를 옮기고 zIndex를 업데이트
                    $('.wheel > div').eq(activeIndex + 1).addClass('active').css('z-index', 1);
                    $('.wheel > div').eq(activeIndex).removeClass('active').css('z-index', 0);
                }
            });

            // 'next-box' 클릭 이벤트 핸들러를 설정
            $('.next-box').on('click', function () {
                // 현재 활성 요소의 인덱스를 가져옵니다.
                let activeIndex = $('.wheel > .active').index();

                // 현재 활성 요소가 첫 번째 요소가 아닌 경우
                if (activeIndex > 0) {
                    // 이전 요소로 활성 클래스를 옮기고 zIndex를 업데이트
                    $('.wheel > div').eq(activeIndex - 1).addClass('active').css('z-index', 1);
                    $('.wheel > div').eq(activeIndex).removeClass('active').css('z-index', 0);
                }
            });

            // 'back-box' 클릭 이벤트 핸들러를 설정
            $('.back-box').on('click', function () {
                // 현재 활성 요소의 인덱스를 가져옵니다.
                let activeIndex = $('.wheel > .active').index();

                // 현재 활성 요소가 마지막 요소가 아닌 경우
                if (activeIndex < 4) {
                    // 다음 요소로 활성 클래스를 옮기고 zIndex를 업데이트
                    $('.wheel > div').eq(activeIndex + 1).addClass('active').css('z-index', 1);
                    $('.wheel > div').eq(activeIndex).removeClass('active').css('z-index', 0);
                }
            });

        });
        // 현재 날짜, 시간 가져오기
        let date = new Date();
        // 연도, 월, 월 이름, 일 요소 가져오기
        const $year = document.querySelector("#year");
        const $month = document.querySelector("#month");
        const $smonth = document.querySelector("#smonth");
        const $day = document.querySelector("#day");

        // 현재 연도를 연도 요소에 설정
        $year.textContent = date.getFullYear();

        // 현재 월을 월 요소에 설정
        $month.textContent = date.getMonth() + 1; // Adding 1 to make it 1-indexed

        // 월 이름 배열을 정의합니다.
        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        // 현재 월의 인덱스를 가져와서 해당 월 이름을 월 이름 요소에 설정
        let monthIndex = date.getMonth();
        let monthName = monthNames[monthIndex];
        $smonth.textContent = monthName;

        // 요일 이름 배열을 정의
        const weekdayNames = [
            "일", "월", "화", "수", "목", "금", "토"
        ];

        // 현재 요일의 인덱스를 가져와서 해당 요일 이름과 날짜를 일 요소에 설정
        let weekdayIndex = date.getDay();
        let weekdayName = weekdayNames[weekdayIndex];
        let day = date.getDate();
        //textCpmtemt로 현재 요일과 날짜 출력
        $day.textContent = `${day} (${weekdayName})`;


        //사이드 바 출력함수
        function toggleSidebar() {
            var sidebar = document.getElementById("sidebar");
            sidebar.classList.toggle("active");
        }
        //메인으로 가는 버튼 함수
        const main_button = () => {
            url = "http://127.0.0.1:5500/app/Front/main_dev/Main.html";
            window.location.href = url;
        };
    </script>
</body>

</html>